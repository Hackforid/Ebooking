<%inherit file="base.html" />
<%def name="right_content()">
<div
    ng-app="hotelInventoryApp"
    ng-controller="hotelInventoryCtrl"
    >
<!--导航条--> 
<div class="notice" id="notice"><h2>当前酒店：{{hotel.name}}</h2></div>
<!--导航条end-->  

<!--主体内容-->  
<div class="main"
    ><div class="p15">

        <!--已合作酒店开始-->  
        <div class="main-rchoose" > 
            <ul class="menu-title">
                <li><a href="/hotel/cooped/${hotel_id}/inventory/" class="active">房量房态</a></li>
                <li><a href="/hotel/cooped/${hotel_id}/rateplan/">房价金额</a></li>
            </ul>

        </div>

        <div class="main-room"><div class="content">
                <div class="p15">

                    <div class="choosem">                 
                        <div class="left">选择操作月份：
                            <select name="" class="input-s"
                                ng-model="monthvalue"                               
                                >
                                <option  value={{$index+1}}  ng-repeat="i in months">{{i.month}}月</option>

                            </select></div>

                    </div>


 

                    <div class="form form1"
                        ng-repeat="room in cooped" ng-init="index=$index"
                        >
                        <div class="roomhead"><h1 ng-click="hotelHeadDialog.eachshow($index);">{{room.name}}--剩余房量</h1><span></span>
                            <div class="eachroom" style=" display:none;">
                                <label>房型名称：{{room.name}}<a class="a-blue" ng-click="roomDescribe()">[房型详情]</a></label>
                                <label>自定义房型名称：<input id={{"prefixId-"+$index}} ng-init="prefixName=room.prefix_name" style="" type="text"  ng-value="room.prefix_name"  ng-model="prefixName" class="input-t"  />
                                                             
                                    <span style="position:relative;left:-7px;">{{room.name}}</span><b style="position:relative;font-weight:normal;" >(</b>
                                        <input id={{"remarkId-"+$index}} style="position:relative;left:-7px" type="text" ng-value="room.remark_name"  ng-model="remarkName" ng-init="remarkName=room.remark_name"  class="input-t"  />
                                        
                                        <b style="position:relative;left:-14px;font-weight:normal;" >)</b>
                                     <span id={{"exampleDiv-"+$index}} style="font-weight:normal;" ng-mouseover="hotelHeadDialog.exampleDivIn($index);" ng-mouseleave="hotelHeadDialog.exampleDivLeave($index);">?
                                     </span> 
                                    </label>
                                                              
                                <label>
                                <input name=""  ng-click="hotelHeadDialog.save($index);" type="button" value="保存" class="btn-s"  />
                                    <input name=""  ng-click="hotelHeadDialog.eachhide($index);"  type="button" value="取消" class="btn-s btn-bai"  /></label>
                            </div>
                        </div>

                     
                        <table width="100%" border="0" cellspacing="1" cellpadding="0" class="table03 room-table01" >
                            <thead><tr>
                                    <th class="table-title">日期</th>

                                    <th id={{"dayth"+monthvalue+""+day.day}} ng-repeat="day in dayWeekSum" ng-style="day.textcolor">{{day.day}}<br/>{{day.weekday}}</th>


                                    <!--<th>1<br />
                                        三</th>
                                    <th>2<br />
                                        四</th>
                                    <th>3<br />
                                        五</th>
                                    <th ><strong class="today">今<br />
                                            天</strong></th>
                                    <th ><strong>5<br />
                                            日</strong></th>
                                    <th>6<br />
                                        一<br /></th>
                                    <th>7<br />
                                        二</th>
                                    <th>8<br />
                                        三</th>
                                    <th>9<br />
                                        四</th>
                                    <th>10<br />
                                        五</th>
                                    <th><strong>11<br />
                                            六</strong></th>
                                    <th><strong>12<br />
                                            日</strong></th>
                                    <th>13<br />
                                        一<br /></th>
                                    <th>14<br />
                                        二</th>
                                    <th>15<br />
                                        三</th>
                                    <th>16<br />
                                        四</th>
                                    <th>17<br />
                                        五</th>
                                    <th><strong>18<br />
                                            六</strong></th>
                                    <th><strong>19<br />
                                            日</strong></th>
                                    <th>20<br />
                                        一<br /></th>
                                    <th>21<br />
                                        二</th>
                                    <th>22<br />
                                        一<br /></th>
                                    <th>23<br />
                                        二</th>
                                    <th>24<br />
                                        三</th>
                                    <th>25<br />
                                        四</th>
                                    <th>26<br />
                                        五</th>
                                    <th><strong>27<br />
                                            六</strong></th>
                                    <th><strong>28<br />
                                            日</strong></th>
                                    <th>29<br />
                                        一<br /></th>
                                    <th>30<br />
                                        二</th>
                                    <th>31<br />
                                        一<br /></th>-->
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="table-title">自动确认房量</td>
                                    <td class={{numauto.classStyle}} ng-repeat="numauto in roomNumAuto[room.id] | orderObjectBy:'' ">

                                    <span id={{room.id+"-auto"+$index}}  ng-click=changeNum((room.id+"-auto"+$index),(numauto.classStyle),(room.cooped_roomtype_id),(index),0);>{{numauto.autoNum}}</span></td>
                                   <!-- <td class="stop"><span>{{room.day1}}</span></td>
                                    <td class="stop"><span>{{room.day2}}</span></td>
                                    <td class="stop"><span>{{room.day3}}</span></td>
                                    <td class="action1 man-close"><span>{{room.day4}}</span></td>
                                    <td class="action1 man-close"><span>0</span></td>
                                    <td class="action1"><span>90</span></td>
                                    <td class="action1"><span>95</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1 man-close"><span>0</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>90</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td>
                                    <td class="action1"><span>100</span></td> -->
                                </tr>
                                <tr>
                                    <td class="table-title">手工确认房量</td>
                                     <td class={{numhead.classStyle}} ng-repeat="numhead in roomNumHand[room.id] | orderObjectBy:''">

                                     <span id={{room.id+"-head"+$index}}  ng-click=changeNum((room.id+"-head"+$index),(numauto.classStyle),(room.cooped_roomtype_id),(index),1);>{{numhead.headNum}}</span>



                                     </td>
                                    <!--<td class="stop"><span>--</span></td>
                                    <td class="stop"><span>--</span></td>
                                    <td class="stop"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1 man-close"><span>0</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>5</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>
                                    <td class="action1"><span>--</span></td>-->
                                </tr>
                            </tbody>
                        </table>             
                    </div>

                    <div class="form"><input name="" type="button" value="增加可合作房型" class="" style="width:150px" id="openBtn" ng-click="newRoomType()"/></div>

                    <div class="room-tips">
                        标识说明：<span>剩余可售房量</span><span>不可操作</span><span>关闭</span>
                        <p>（单击单元格进行修改房量操作。房量数设置为0即为关闭）</p>
                    </div>


                </div>
        </div></div>
        <!--已合作酒店结束-->  

</div></div>
<!--主体内容end--> 



<!--房型概述弹窗浮层-->     
<div class="messageDiv" id="cool-roomtype" ng-show="desResult" style="z-index:99999">
   <div class="messageBlack"></div>
   <div class="detail detail-roomtype">
       <div class="head"><h1>房型概述</h1></div>
       <p id="closeDiv" class="close" ng-click="roomDescribeClose()">X</p>
       <div class="con"><div class="cm">
           <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="90"><strong>房型名称：</strong></td>
    <td>豪华房</td>
  </tr>
  <tr>
    <td><strong>房间大小：</strong></td>
    <td>15-20平方米</td>
  </tr>
  <tr>
    <td><strong>床型：</strong></td>
    <td>大床、双床、三床、四床</td>
  </tr>
  <tr>
    <td><strong>床尺寸：</strong></td>
    <td>200cm*180cm</td>
  </tr>
  <tr>
    <td><strong>楼层：</strong></td>
    <td>1层</td>
  </tr>
  <tr>
    <td><strong>入住人数：</strong></td>
    <td>2人</td>
  </tr>
  <tr>
    <td><strong>设施：</strong></td>
    <td>wi-fi、宽带、有线电视、洗漱用品、24小时热水、空调</td>
  </tr>
  <tr>
    <td><strong>描述：</strong></td>
    <td>标准间……</td>
  </tr>
 
</table>

       </div></div>
   </div> 
</div>   
<!--房型概述弹窗浮层end-->   














<!--修改房量弹窗浮层-->     
<div class="messageDiv" id="openDiv1" style=" display:none" ng-init="num=5">
   <div class="messageBlack"></div>
   <div class="detail piliang-room">
       <div class="head"><h1>修改手工（或自动）房量</h1></div>
       <div class="con">
           <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="80">房型：</td>
    <td>豪华房</td>
  </tr>
  <tr>
    <td>日期：</td>
    <td><input type="text" name="time1" id="time1" onclick="" value="2014-12-22" class="input-time" / > 至 
                     <input type="text" name="time2" id="time2" onclick="" value="2014-12-22" class="input-time" /></td>
  </tr>
  <tr>
    <td>房量调整：</td>
    <td><input name="" id="roomNumCount" type="text" class="input-t" value="5" placeholder="输入数字" ng-model="num"/></td>    
  </tr>
</table>
          <p class="action" style=" text-align:center">
          <input name="" type="button" value="设置为0" ng-click="changeNumDialog.zeroSave()" class="sure-more btn-bai" />
          <input name="" type="button" ng-click="changeNumDialog.addSave()" value={{"加("+num+")房量"}}  class="sure-more" />
           <input name="" type="button" ng-click="changeNumDialog.minusSave()" value={{"减("+num+")房量"}} class="sure-more" />
          <input name="" ng-click="changeNumDialog.close()" type="button" value="取消" class="btn btn-bai"  />
          </p>
       </div>
   </div> 
</div>   
<!--修改房量弹窗浮层end-->   
 
 
<!--房量修改再次确认浮层-->    
<div class="messageDiv" id="openDiv2" style=" display:none;" >
   <div class="messageBlack"></div>
   <div class="detail" style="width:300px;margin-left:-150px;" >
       <div class="con">
           <p class="f16" style=" text-align:center;padding:30px 0;">是否确认修改？</p>

          <p class="action" style=" text-align:center">
          <input name="" type="button" value="确认" class="btn" />
          <input name="" type="button" value="取消" class="btn-no btn-bai"  />
          </p>
       </div>
   </div> 
</div>   
<!--房量修改再次确认浮层end-->  







<!--可合作房型弹窗浮层-->     
<div class="messageDiv" id="roomtype-list" style=" display:none">
   <div class="messageBlack"></div>
   <div class="detail detail-roomlist">
       <div class="head"><h1>房型列表</h1></div>
       <div class="con">
       
          <div class="cm">
          <h2>您已合作的房型：</h2>
          <p><i ng-repeat="coopedRoom in cooped">{{coopedRoom.name+"    "}}</i></p>
          
          <h2>选择你想要合作的房型：<span><a class="a-blue" href="http://wpa.qq.com/msgrd?v=3&uin=1816777547&site=qq&menu=yes" target="_blank">没有您要合作的房型？联系客服</a></span></h2>
    <div class="list">
        <label ng-repeat="willCoopRoom in willCoop">
            <input name="" type="checkbox" ng-model="willCoopRoom.isChecked" value="" />{{willCoopRoom.name}}<a class="a-blue" ng-click="roomDescribe()">[房型详情]</a>
        </label>
     </div>
         </div>
          <p class="action" style=" text-align:center; ">
         
           <input name="" type="button" value="确认" ng-click="saveNewRoomType()" />
          <input name="" type="button" value="取消" ng-click="closeRoomType()" class="btn-bai"  />
          </p>
         
       </div>
   </div> 
</div>   
<!--可合作房型弹窗浮层end-->  

</div>
</%def>

<%def name="end()">
    <script>
        var hotelId = ${hotel_id};
    </script>
    <script src="${static_url('js/hotelInventory.js')}"></script>
</%def>

